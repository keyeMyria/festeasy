<loading-indicator data="order && packages && data" error="error"></loading-indicator>
<div class="container-fluid">
	<div ng-show="order && packages && data">
		<div class="ui segment">
			<h2 class="ui header">Order {{order.id}}</h2>
      <span>Order ID: {{order.id}}</span>
			<br/>
      <span>Created On: {{order.created_on  | date:'medium'}}</span>
			<br/>
      <span>Festival: <a ui-sref="base.festivals.overview">{{order.festival.name}}</a></span>
			<br/>
      <span>User: <a ui-sref="base.users">{{order.user_id}}</a></span>
		</div>
		<div class="ui segment">
			<h2 class="ui header">Products</h2>
			<table ng-table="tableParams" class="ui selectable celled table" show-filter="true">
		    <tr ng-repeat="entry in $data">
		        <td title="'Product'" filter="{productName: 'text'}" sortable="'productName'">
		          {{entry.productName}}
						</td>
		        <td title="'Demand'" filter="{demand: 'number'}" sortable="'demand'">
		          {{entry.demand}}
						</td>
						<td title="'Packaged'" filter="{packaged: 'number'}" sortable="'packaged'">
							{{entry.packaged}}
						</td>
						<td title="'Available in stock'" filter="{availableStockUnits: 'number'}" sortable="'availableStockUnits'">
							{{entry.availableStockUnits}}
						</td>
						<td title="'To pack'" filter="{toPack: 'number'}" sortable="'toPack'">
							{{entry.toPack}}
						</td>
		    </tr>
			</table>
		</div>
		<div class="ui segment">
			<h2 class="ui header">Packages</h2>
			<p ng-show="packages.length == 0" class="lead">This order has no packages yet.</p>
			<table ng-show="packages.length > 0" ng-table="packagesTableParams" class="ui selectable celled table" show-filter="true">
		    <tr ng-repeat="entry in $data">
	        <td title="'Package ID'" filter="{id: 'number'}" sortable="'id'">
	          <a ui-sref="base.packages.package({packageId: entry.id})">{{entry.id}}</a>
					</td>
	        <td title="'Date Added'" filter="{created_on: 'text'}" sortable="'created_on'">
	          {{entry.created_on | date:'medium'}}
					</td>
					<td title="'Delete'">
						<button class="ui button" ng-click="deletePackage(entry)">Delete</button>
					</td>
		    </tr>
			</table>
			<button class="ui button" ng-click="createPackage()">Create Package</button>
		</div>
	</div>
</div>
