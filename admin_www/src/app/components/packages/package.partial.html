<div class="container-fluid">
	<loading-indicator data="package && products && psus" error="error"></loading-indicator>
	<div ng-show="package && products && psus">
		<div class="row">
			<h1>Package {{package.id}}</h1>
	  	<div class="row">
		  	<label for="inputName" class="col-sm-3 control-label">ID</label>
	    	<div class="col-sm-9">
	      	<span>{{package.id}}</span>
	    	</div>
	    </div>
	    <div class="row">
	  	  <label for="inputName" class="col-sm-3 control-label">Created On</label>
	    	<div class="col-sm-9">
	      	<span>{{package.created_on}}</span>
	    	</div>
	    </div>
			<div class="row">
	  	  <label for="inputName" class="col-sm-3 control-label">Order</label>
	    	<div class="col-sm-9">
	      	<a ui-sref="base.orders.order({orderId: package.order.id})">{{package.order.id}}</a>
	    	</div>
	    </div>
		</div>
		<div class="row">
			<form class="form-horizontal col-md-6" ng-submit="createPSU(package.id, selectedStockUnit.id)">
		    <fieldset>
	      	<legend>Add product from stock:</legend>
	      	<div class="form-group">
	        	<label class="col-sm-3 control-label">Product</label>
	        	<div class="col-sm-6">
	          		<ui-select ng-model="selectedProduct" on-select="updateSelectedProduct($item, $model)" theme="bootstrap">
	            		<ui-select-match placeholder="Select or search a product in the list...">{{$select.selected.name}}</ui-select-match>
	            		<ui-select-choices repeat="product in products | filter: $select.search">
	              			<span ng-bind="product.name"></span>
	            		</ui-select-choices>
	          		</ui-select>
	        	</div>
	      	</div>
					<div class="form-group">
	        	<label class="col-sm-3 control-label">Stock Unit</label>
						<div class="col-md-6">
		        	<div ng-show="!stockUnits || stockUnits.length > 0">
		          		<ui-select ng-model="selectedStockUnit" on-select="updateSelectedStockUnit($item, $model)" theme="bootstrap">
		            		<ui-select-match placeholder="Select or search a stock unit in the list...">{{$select.selected.id}}</ui-select-match>
		            		<ui-select-choices repeat="su in stockUnits | filter: $select.search">
		              			<span ng-bind="su.id"></span>
		            		</ui-select-choices>
		          		</ui-select>
		        	</div>
							<div ng-show="stockUnits.length == 0">
								<span class="lead text-danger">No avaliable stock</span>
							</div>
						</div>
	      	</div>
	      	<div class="form-group">
	        	<button class="btn btn-success pull-right" type="submit">Add Product</button>
	      	</div>
		    </fieldset>
			</form>
		</div>
		<div class="row">
			<h3>Products:</h3>
			<div>
				<table ng-show="psus.length > 0" ng-table="tableParams" class="table" show-filter="true">
			    <tr ng-repeat="entry in $data">
		        <td title="'PSU ID'" filter="{id: 'number'}" sortable="'id'">
							Packaged Stock Unit {{entry.id}}
						</td>
		        <td title="'Date Added'" filter="{created_on: 'text'}" sortable="'created_on'">
		          {{entry.created_on}}
						</td>
						<td title="'Product'" filter="{'stock_unit.product.id': 'number'}" sortable="'stock_unit.product.id'">
							{{entry.stock_unit.product.name}}
						</td>
						<td title="'Stock Unit ID'" filter="{'stock_unit.id': 'number'}" sortable="'stock_unit.id'">
							Stock Unit {{entry.stock_unit.id}}
						</td>
						<td title="'Remove'">
							<button class="btn btn-warning" ng-click="removePSU(entry)">Remove</button>
						</td>
			    </tr>
				</table>
			</div>
		</div>
	</div>
</div>
