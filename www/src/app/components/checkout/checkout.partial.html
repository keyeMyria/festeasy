<loading-indicator data="cart && festival && cartProducts" error="error"></loading-indicator>
<div class="ui segment">
	<div class="">
		<div ng-show="cart && festival && cartProducts">
			<p>
				Order for:
				<a style="cursor:pointer;" ui-sref="base.festivals.festival({festivalId:festival.id})">
					{{festival.name + ' ' + (festival.starts_on | date: 'yyyy')}}
				</a>
			</p>
			<div>
				<p>Starts: {{festival.starts_on | date: "EEEE, d MMMM yyyy"}}</p>
				<p>Ends: {{festival.ends_on | date: "EEEE, d MMMM yyyy"}}</p>
			</div>
			<br/>
			<table class="ui selectable celled table">
				<thead>
					<th>Item Description</th>
					<th>Quantity</th>
					<th>Unit Price</th>
					<th>Sub Total</th>
				</thead>
				<tbody>
					<tr ng-repeat="cartProduct in cartProducts">
						<td>
							<a
								ui-sref="base.store.product({productId: cartProduct.product.id})"
								ui-sref-opts="{inherit: false}">
								{{cartProduct.product.name}}
							</a>
						</td>
						<td>{{cartProduct.quantity}}</td>
						<td><rands amount-rands="cartProduct.product.price_rands"></rands></td>
						<td><rands amount-rands="cartProduct.sub_total_rands"></rands></td>
					</tr>
				</tbody>
			</table>
			<div>
				<p>
					Total: <rands amount-rands="cart.total_rands"></rands>
				</p>
				<button ng-click="checkout()" class="ui button">Place order</button>
			</div>
		</div>
	</div>
</div>
