<div class="container">
	<loading-indicator data="cart && cartProducts" error="error"></loading-indicator>
	<div ng-show="cart && !cartProducts.length">
		<div class="text-center">
			<p class="lead">
				Your cart is empty
			</p>
			<button class="btn btn-primary" ui-sref="base.store.products">
				Continue shopping
			</button> 
		</div>
	</div>
	<div ng-show="cart && cartProducts.length">
		Festival:
		<ui-select ng-model="selectedFestival" on-select="updateSelectedFestival($item, $model)">
		    <ui-select-match placeholder="Select a festival">
		        <span ng-bind="$select.selected.name"></span>
		    </ui-select-match>
		    <ui-select-choices repeat="festival in (festivals | filter: $select.search) track by festival.id">
		        <span ng-bind="festival.name"></span>
		    </ui-select-choices>
		</ui-select>
		<br/>
		<table class="table">
			<th>Item Description</th>
			<th>Quantity</th>
			<th>Unit Price</th>
			<th>Sub Total</th>
			<th>Remove</th>
			<tr ng-repeat="cartProduct in cartProducts">
				<td>{{cartProduct.product.name}}</td>
				<td>{{cartProduct.quantity}}</td>
				<td>{{cartProduct.product.price_rands}}</td>
				<td>{{cartProduct.sub_total_rands}}</td>
				<td><button class="btn btn-warning" ng-click="remove(cartProduct)">Remove</button></td>
			</tr>
		</table>
		<div class="pull-right">
			<p class="lead">
				Total: {{cart.total_rands}}
			</p>
			<button ng-click="checkout()" class="btn btn-success btn-lg">Secure Checkout</button>
		</div>
	</div>
</div>
